/*
 * tests/embodiment/AGISimSim/proxy/SimProxyUTest.cxxtest
 *
 * Copyright (C) 2002-2009 Novamente LLC
 * All Rights Reserved
 * Author(s): Welter
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License v3 as
 * published by the Free Software Foundation and including the exceptions
 * at http://opencog.org/wiki/Licenses
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program; if not, write to:
 * Free Software Foundation, Inc.,
 * 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301 USA.
 */


#include "SimProxy.h"
#include "utils.h"

#define NUM_SENSATION_FILES 7
const char* sensationFiles[] = {"audioData.xml", "pixelVisual.xml", "selfData.xml", "smellData.xml", "tasteData.xml", "objectVisual.xml", "mapInfo.xml"};

class SimProxyUTest :  public CxxTest::TestSuite
{

public:
    void setUp() {
    }

    void tearDown() {
    }

    void testGetNMXml() {
        SimProxy* proxy1 = new SimProxy("", 0, new DefaultPerceptionAndStatusHandler());
        SimProxy* proxy2 = new SimProxy("", 0, new DefaultPerceptionAndStatusHandler());

        for (int i = 0; i < NUM_SENSATION_FILES; i++) {
            std::string agiSimMessage;
            std::string fullXmlPath = XML_FILES_PATH "/";
            fullXmlPath += sensationFiles[i];
            if (LoadTextFile(fullXmlPath, agiSimMessage))
                std::cout << "agiSimMessage:" << std::endl << agiSimMessage << std::endl;

            proxy1->processAgiSimMessage(agiSimMessage, false);
            proxy2->processAgiSimMessage(agiSimMessage, false);
        }
        delete proxy1;
        delete proxy2;
    }
};
