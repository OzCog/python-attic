/**
 * BuiltInProcedureRepositoryUTest.cxxtest
 *
 * Author: Welter Luigi 
 * Copyright(c), 2007
 */
#include "BuiltInProcedureRepository.h"
#include "ActionPlanSenderMock.h"
#include "PetInterfaceMock.h"
#include "SystemParameters.h"

using namespace Procedure;
using namespace PerceptionActionInterface;

class BuiltInProcedureRepositoryUTest :  public CxxTest::TestSuite {
    
    public:
        BuiltInProcedureRepositoryUTest(){
        }
        
        ~BuiltInProcedureRepositoryUTest(){
        }
        
        void setUp(){
        }

        void tearDown(){
        }


    void testContains() {
        AtomSpace as;
    	SpaceServer spaceServer(as);
    	
        Control::SystemParameters sp;
        FailureActionPlanSender ap;
        PetInterfaceMock pi;
        PAI pai(spaceServer, ap, pi, sp);
        pi.setPAI(&pai);
        BuiltInProcedureRepository rep(pai);
        TS_ASSERT(rep.contains(string("BARK")));
        TS_ASSERT(!rep.contains("non-existing-builtin-schema"));
    }
    
    void testGet() {
        AtomSpace as;
    	SpaceServer spaceServer(as);
    	
        Control::SystemParameters sp;
        FailureActionPlanSender ap;
        PetInterfaceMock pi;
        PAI pai(spaceServer, ap, pi, sp);
        pi.setPAI(&pai);
        BuiltInProcedureRepository rep(pai);
        const BuiltInProcedure& proc = rep.get(string("BARK"));
        TS_ASSERT(proc.getName() == "BARK");
    } 
        
};
